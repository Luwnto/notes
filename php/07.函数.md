## 函数的定义

### 什么是函数

函数是一种功能，通过调用，可以实现特定的一些功能，系统会提供给我们很多写好的函数，也可以自己写。

### 一些系统函数

比如：is_int()    is_float()   is_bool()   isset()   empty()   unset()

### 函数的要点

1. 函数的作用。

2. 函数的参数。

3. 函数的返回值。

## 自定义函数

除了系统提供的函数，我们还可以自定义函数。

### 函数的基本格式

```php
<?php
    /*
    function  函数名([参数1，参数2，参数3]){
         函数体 (php语句)
        [return  返回值]
    }
    */

    func();

    //函数定义
    function aaa()
    {
        echo "你好，北北！";
    }

    //函数的调用，函数可以在本文件任何位置，不受位置影响
    //因为内存加载不按照代码书写加载，而是根据调用行数
    aaa();

    function func()
    {
        echo '123';
    }

    var_dump(function_exists('func'));
    var_dump(function_exists('func1'));
```

### 函数的命名规范

1.  函数名遵循 PHP 全名命名规则，字母数字下划线组成，不能以数字开头。
2.  函数名不区分大小写，但我们一般使用小写。
3.  不能重复声明函数名一样的函数。
4.  检测函数名是否被声明 function_exists，小括号里面一定要加上引号。

## 函数的 return 返回值

### return 的作用

1. 如果函数中存在 return 并且执行该 return，那么该函数的将执行结构可以被变量接收。

2. 如果函数的执行过程中执行了 return 语句，后续的代码将不在执行。

### echo和return的区别

echo 这哥们自带大喇叭，到处喊，很外向，干完事直接喊完拉到。

return 这哥们内向，有事儿不说话，默默把事儿干完了回来告诉你一声。

```php
<?php
    function func()
    {
        return 1;
        return 2;
    }

    $a = func();

    echo $a + 1;

    echo '<hr/>';

    function func1()
    {
        echo 1;
    }

    $b = func1();
    echo $b + 1;
```

## 函数的参数

### 形参

人称形式上的参数，声明函数的时候小括号里面的参数叫形参。

1. 形参可以有默认值 ，也可以没有默认值。

2. 没有默认值的时候必须有实参的传递。

3. 如果有默认值请将有默认值的参数放在最右边，没有默认值的形参放在最左边。

4. 默认值相当于小三 ，实参就是原配。

5. 多个形参之间的我们用逗号进行分隔。

### 实参

人称实际的参数，是在函数调用的时候小括号里面的写的内容。

1. 实参的个数可以比形参的多 ，多出来的参数没有用，所以我们实参的个数需要按照形参的个数去书写。

2. 如果你的形参有默认值可以少写实参。

```php
<?php
    function jia($a, $b)
    {
        return $a + $b;
    }

    jia(5, 6);


    function jia1($a = 10, $b = 5)
    {
        return $a + $b;
    }

    jia1();

    function jia2($a, $b = 20)
    {
        return $a + $b;
    }

    jia2(10);

    function table($cols = 10, $rows = 10)
    {
        echo '<table border="1" width="800" align="center">';
        for ($i = 0; $i < $rows; $i++) {
            echo '<tr>';
            for ($j = 0; $j < $cols; $j++) {
                echo '<td>' . $j . '</td>';
            }
            echo '</tr>';
        }

        echo '</table>';
    }

    //table(1);
    //table(1);
    table(5, 8);
    // table(1000,100);
```

### 值传递和引用传递

1. 值传递：将实参的值传递给形参，在函数内的操作仅针对形参，操作不会影响到实参，即实参的返回值是固定不变的。

2. 引用传递：将实参的内存地址传递给形参，在函数内部的所有操作都会影响到实参，也就是操作结果会改变实参的返回值。如果要使用引用传递，在定义函数的形参前面加上 `&` 符号。

> 引用传递的实参必须是一个变量。

```php
<?php
    function fun(&$v)
    {
        $v += 3;
    }
    function fun2($v)
    {
        $v += 3;
    }

    $a = 3;
    echo '变量a原来的值是：' . $a . '<br />';
    fun($a);
    echo '引用参数函数计算结果是：' . $a . '<hr />';

    $b = 3;
    echo '变量b原来的值是：' . $b . '<br />';
    fun2($b);
    echo '值用参数函数计算结果是：' . $b;
```

### 小案例

```php
<?php
    //调用创建游戏角色的功能
    CreatePerson('渣渣辉', '男', '战士', '屠龙');

    //定义一个创建游戏角色的功能
    function CreatePerson($name, $sex, $job, $wuqi = '白菜', 
        $head = '锅盖', $yifu = "麻袋", $xie = '草鞋', $jiezhi = "铁戒指")
    {
        //传奇为例
        //有姓名:
        echo '角色的名称是:' . $name . '<br/>';
        //有性别:
        echo '角色的性别是:' . $sex . '<br/>';
        //有职业：
        echo '角色的职业是:' . $job . '<br/>';

        //以上是用户选项必须填写的内容

        echo '进入游戏<br/>';

        //进入游戏之后有初始装备
        echo '头部:' . $head . '<br/>';
        echo '手拿:' . $wuqi . '<br/>';
        echo '身披:' . $yifu . '<br/>';
        echo '脚穿:' . $xie . '<br/>';
        echo '戒指:' . $jiezhi . '<br/>';
    }
```

## 可变参数函数

以上参数的函数，其实就是实参和形参个数相同，不管怎么凑，都是相同的。

而所谓可变参数函数，就是不需要写形参，实参任意个数。

`func_get_args()` 获取所有实参的值，以数组的形式返回。

`func_num_args()`  获取所有是实参的个数。

`func_get_arg(index)` 通过下标去取出我们数组中的值。

```php
<?php
    function sum()
    {
        //获取所有实参的值以数组的形式返回
        $arr = func_get_args();
        //var_dump($arr);
        //获取所有实参的个数
        $num = func_num_args();
        //echo '<hr/>';
        //通过下标获取我们数组中的值
        //echo func_get_arg(10);
        $sum = 0;
        for ($i = 0; $i < $num; $i++) {
            $sum = $sum + func_get_arg($i);
        }
        echo $sum;
    }

    sum(1, 2, 3, 4, 5, 6, 7, 8, 9);
```

## 变量函数

变量函数（动态调用函数）: 如果一个变量后面有括号：`$zhangsan=’demo’;$zhangsan()` 就会寻找与变量值同名的函数进行调用。

```php
<?php
    $a = 'laowang';
    $laowang = 'erhuo';
    echo $$a;

    function goods()
    {
        echo 'hi';
    }

    goods();
    $heart = 'goods';
    $heart();
    //php很灵活，你本意就是调用goods函数，但如果你有一个变量里面正好是goods
    //它同样可以通过调用变量的方法调用函数。

    function text()
    {
        echo '本故事纯属虚构如有雷同那就是事实<br/>';
    }

    $zhangsan = 'lisi';
    $lisi = 'text';

    $$zhangsan();
```

## 匿名函数

所谓匿名函数：就是没有名字的函数。

声明格式：`$user = function(){};`

> 注意：一定要加分号一定要加分号 一定要加分号。

匿名函数一定要在声明后面调用函数 不能在声明函数前调用函数，因为匿名函数其实就是变量赋值，是把整个函数赋值给一个变量了，变量是先声明后使用。

```php
<?php
    $user = function ($a) {
        echo '我就是匿名函数';
        echo $a;
    };
    $user(2);
```

## 递归函数

编程大师说：编程中有两个重要的难点 。

1. 递归  
2. 指针

难点在于：你要想使用递归，就必须先理解递归。    

```php
<?php
    function t(){
        echo '!';
        t();
    }
    t();
```
递归的特点:

1.自身调用自身 (如果一直调用下去肯定不行，死循环) 。   
2.要有一个明确的边界，能够终止调用。

写一个num求和函数，输入参数n，可以求到1+2+3+4+...+n的和：

```php
<?php
    // 1+到100的和是多少?1+2+3+...+100
    // 1+到99的和是多少?
    // 1+到89的和是:[1+到88之和]
    // 89+87+[1+到86之和]
    // ...
    // 89+87+...+2+1

    function sum($n)
    {
        if ($n > 1) {
            return $n + sum($n - 1);
        } else {
            return 1;
        }
    }

    echo sum(100);
```

我们不能理解是因为计算机计算的太快。

递归：一个一个递过来，再一个一个归回去。

> 注意：一般我们需要工作2年左右,才能熟练的写出递归，先明白递归是怎么运行的，随着代码量的增加，慢慢深化复杂的递归。

## 函数中变量的作用域

### 局部和全局变量

变量的作用域，就是变量在函数里，和不在函数里。

对于 PHP 而言，函数的作用域非常简单，它就区分函数内和函数外。

```php
<?php
   function t1()
    {
        echo $a;
        $b = 5;
    }

    $a = 2;

    t1();//Notice
    echo $b;//Notice
```

1. 函数内部的变量和函数外部的变量互不干扰。

2. 函数内变量成为"局部变量"。

3. 在 PHP 页面中声明的，且在函数外部变量成为"全局变量"。

### global 关键字（不推荐）

如果非要在全局使用局部变量怎么办?

方法1：使用关键词 `global`（强烈不推荐）：

```php
<?php
    function t1() {
        global $a;//这句话是声明,$a这个变量就去全局的花名册中找
        $a +=1;
        echo $a ;
    }

    $a = 2;
    echo $a,'<br >';

    t1();

    echo '<br >';
    echo $a,'<br >';
```

方法2：使用 $GLOBALS 超全局数组（同样不推荐）：

```php
<?php
    $b = 5;
    $c = 'hello';
    print_r($GLOBALS);

    function t2() 
    {
        $GLOBALS['c'] = 'word';
        $GLOBALS['d'] = 'welcome';
    }
    t2();
    echo $c;
    echo $d;
```

$GLOBALS 是系统给定的一个超级全局变量。    

### static 静态变量

1.普通局部变量：

函数调用时 ---> 初始化 
函数结束时 ---> 从内存消失    

```php
<?php
    function t()
    {
        $a = 3;
        $a += 1;
        return $a;
    }

    echo t(), '<br >';
    echo t(), '<br >';
    echo t(), '<br >';
```

> 函数放在这里，不调用，不执行。
> 当我们调用的时候，会在内存中申请一个空间来执行。
> 函数运行完毕，空间会从内存中清除掉。
> 再调用 ---> 再申请。
> 在内存清除数据之前，return 可以帮你返回到调用处一个值，可供外界使用。

2. static 静态变量：

所谓静态变量，是相对内存而言，俗称静止不动的变量。

```php
<?php
   function t1()
    {
        static $a = 3;
        $a += 1;
        return $a;
    }

    echo t1(), '<br >';
    echo t1(), '<br >';
    echo t1(), '<br >';
```

> 函数初次调用时 ---> 初始化
> 函数结束时 ---> 不从内存消失，下次接着用

常量貌似也可以做到静态的工作，一旦声明，常驻内存，不关闭页面不消失，但常量不可改变，一旦声明，无法修改，而静态变量，可以随时修改。

## 小结

1. 函数是为了解决某些共性问题小工具，大大的提高了代码的复用性
2. PHP为了我们提供了大量的内置函数，我们也可以根据自己的需求自定义函数
3. 在自定义函数的时候，要注意变量的参数和作用域问题